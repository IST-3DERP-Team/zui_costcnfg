<mvc:View controllerName="zuicostcnfg.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:core="sap.ui.core"
    displayBlock="true"
    xmlns="sap.m"
    height="100%"
    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
    xmlns:uiL="sap.ui.layout"
    xmlns:uiT="sap.ui.table">
    <Page id="page" enableScrolling="false" class="sapUiNoContentPadding" showHeader="false">
        <dependents>
            <core:CommandExecution id="CE_NEW" command="New" enabled="true" execute=".createData" />
            <core:CommandExecution id="CE_EDIT" command="Edit" enabled="true" execute=".editData" />
            <core:CommandExecution id="CE_DELETE" command="Delete" enabled="true" execute=".deleteData" />
            <core:CommandExecution id="CE_SAVE" command="Save" enabled="true" execute=".batchSaveData" />
            <core:CommandExecution id="CE_CANCEL" command="Cancel" enabled="true" execute=".cancelData" />
            <core:CommandExecution id="CE_REFRESH" command="Refresh" enabled="true" execute=".refreshData" />
            <core:CommandExecution id="CE_COPY" command="Copy" enabled="true" execute=".copyData" />
        </dependents>
        <content>
            <VBox fitContainer="true" class="sidePadding">
                <smartfilterbar:SmartFilterBar id="smartFilterBar" entitySet="ZVB_3DERP_COSTCNFG_FILTERS" search="onSearch" persistencyKey="3DERP_CCPKey" filterContainerWidth="15rem" showClearButton="true" showClearOnFB="true">
                    <!-- <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="SBU" label="{ddtext>/SBU}" groupId="_BASIC" mandatory="mandatory" width="50px" class="mandatoryFontColor">
                            <smartfilterbar:customControl>
                                <ComboBox id="cboxSBU"
                                    selectedKey="{ui>/sbu}"
                                    change="onSBUChange"
                                    items="{
                                        path: '/ZVB_3DERP_SBU_SH',
                                        templateShareable: false
                                    }">
                                    <core:Item key="{SBU}" text="{SBU}" />
                                </ComboBox>                                  
                            </smartfilterbar:customControl>
                        </smartfilterbar:ControlConfiguration>
                    </smartfilterbar:controlConfiguration> -->

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="COSTCOMPCD" label="{ddtext>/COSTCOMPCD}" groupId="_BASIC" displayBehaviour="descriptionAndId" preventInitialDataFetchInValueHelpDialog="false" width="300px" />
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="EFFECTDT" label="{ddtext>/EFFECTDT}" groupId="_BASIC">
                            <smartfilterbar:customControl>
                                <DateRangeSelection id="EFFECTDTDatePicker" displayFormat="MM/dd/yyyy" valueFormat="MM/dd/yyyy" />
                            </smartfilterbar:customControl>
                        </smartfilterbar:ControlConfiguration>
                    </smartfilterbar:controlConfiguration>

                    <!-- <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="EFFECTDT" label="{ddtext>/EFFECTDT}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration> -->
                    <!-- <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="SHIPTOPLANT" label="{ddtext>/SHIPTOPLANT}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration> -->
                    <!-- <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="PURCHPLANT" label="{ddtext>/PURCHPLANT}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="PURCHGRP" label="{ddtext>/PURCHGRP}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration id="filterVendor" key="VENDOR" label="{ddtext>/VENDOR}" groupId="_BASIC" displayBehaviour="descriptionAndId"
                            preventInitialDataFetchInValueHelpDialog="false"> 
                        </smartfilterbar:ControlConfiguration>
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="MATERIALGRP" label="{ddtext>/MATERIALGRP}" groupId="_BASIC" displayBehaviour="descriptionAndId" preventInitialDataFetchInValueHelpDialog="false" />   
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="MATERIALTYPE" label="{ddtext>/MATERIALTYPE}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" width="15rem" >
                            <smartfilterbar:customControl>
                                <MultiInput id="multiInputMatTyp"
                                    
                                    change="onCustomSmartFilterValueHelpChange"
                                    valueHelpRequest=".onCustomSmartFilterValueHelp"
                                    suggestionRows="{
                                        path: 'materialType>/results',
                                        sorter: { path: 'MaterialType' },
                                        length: 1000,
                                        templateShareable: false
                                    }">
                                    <suggestionColumns>
                                        <Column>
                                            <Label text="Material Type"/>
                                        </Column>
                                        <Column>
                                            <Label text="Description"/>
                                        </Column>
                                    </suggestionColumns>
                                    <suggestionRows>
                                        <ColumnListItem>
                                            <cells>
                                                <Label text="{materialType>MaterialType}" />
                                                <Label text="{materialType>Description}" />
                                            </cells>
                                        </ColumnListItem>
                                    </suggestionRows>
                                </MultiInput>
                            </smartfilterbar:customControl>
                        </smartfilterbar:ControlConfiguration>
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="IONUMBER" label="{ddtext>/IONUMBER}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" width="15rem" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="SEASON" label="{ddtext>/SEASON}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration> -->

                    <smartfilterbar:layoutData>
                        <FlexItemData growFactor="0"/>
                    </smartfilterbar:layoutData>
                </smartfilterbar:SmartFilterBar>

                <uiL:Splitter orientation="Vertical" height="100%">
                    <Panel id="panelHdr" width="100%" height="100%" class="sapUiNoContentPadding">
                        <uiT:Table id="headerTab"
                            class="sapUiTinyMarginBottom sapUiTinyMarginBegin sapUiTinyMarginEnd"
                            visibleRowCountMode="Auto"
                            minAutoRowCount="1"
                            showColumnVisibilityMenu="true"
                            enableColumnFreeze="true"
                            selectionMode="MultiToggle"
                            firstVisibleRowChanged="onFirstVisibleRowChanged"
                            cellClick="onCellClick"
                            sort="onSort"
                            filter="onFilter"
                            alternateRowColors="true"
                            columnFreeze="onColumnUpdated"
                            columnMove="onColumnUpdated"
                            columnResize="onColumnUpdated"
                            columnSelect="onColumnUpdated"
                            columnVisibility="onColumnUpdated">
                            <uiT:rowSettingsTemplate>
                                <uiT:RowSettings highlight="{= ${EDITED} === true ? 'Warning' : null}" />
                            </uiT:rowSettingsTemplate>
                            <uiT:extension>
                                <OverflowToolbar>
                                    <Text text="{counts>/header} Component/s" class="selHdrKeyFontStyle" />
                                    <ToolbarSpacer/>
                                    <SearchField
                                        id="searchFieldHdr"
                                        placeholder="Filter"
                                        value=""
                                        search="filterGlobally"
                                        visible="false"
                                        width="15rem"/>
                                    <ToolbarSeparator/> 
                                    <Button id="btnAddHdr" 
                                        icon="sap-icon://add"
                                        press="onCreate" 
                                        tooltip="{ddtext>/ADD}"
                                        visible="true"/>
                                    <Button id="btnEditHdr" 
                                        icon="sap-icon://edit"
                                        press="onEdit"
                                        tooltip="{ddtext>/EDIT}"
                                        visible="true"/>
                                    <Button id="btnAddNewHdr" 
                                        icon="sap-icon://add"
                                        press="onAddNewRow" 
                                        tooltip="{ddtext>/ADD}"
                                        visible="false"/>
                                    <Button id="btnSaveHdr" 
                                        icon="sap-icon://save"
                                        press=".onBatchSave" 
                                        tooltip="{ddtext>/SAVE}"
                                        visible="false" />
                                    <Button id="btnCancelHdr" 
                                        icon="sap-icon://sys-cancel"
                                        press="onCancel" 
                                        tooltip="{ddtext>/CANCEL}"
                                        visible="false" /> 
                                    <Button id="btnDeleteHdr" 
                                        icon="sap-icon://delete"
                                        press="onDelete"
                                        tooltip="{ddtext>/DELETE}"
                                        visible="true"/>
                                    <Button id="btnCopyHdr" 
                                        icon="sap-icon://copy"
                                        press="onCopy"
                                        tooltip="{ddtext>/COPY}"
                                        visible="true"/>
                                    <Button id="btnRefreshHdr" 
                                        icon="sap-icon://refresh"
                                        press="onRefresh"
                                        tooltip="{ddtext>/REFRESH}"
                                        visible="true"/>
                                    <Button id="btnFullScreenHdr" 
                                        icon="sap-icon://full-screen"
                                        press="onTableResize"
                                        tooltip="{ddtext>/FULLSCREEN}"
                                        visible="true" >
                                        <customData>
                                            <core:CustomData key="Max" value="1" />
                                            <core:CustomData key="TableId" value="headerTab" />
                                            <core:CustomData key="ButtonIdSuffix" value="Hdr" />
                                            <core:CustomData key="Header" value="1" />
                                        </customData>
                                    </Button>
                                    <Button id="btnExitFullScreenHdr" 
                                        icon="sap-icon://exit-full-screen"
                                        press="onTableResize"
                                        tooltip="{ddtext>/EXITFULLSCREEN}"
                                        visible="false" >
                                        <customData>
                                            <core:CustomData key="Max" value="0" />
                                            <core:CustomData key="TableId" value="headerTab" />
                                            <core:CustomData key="ButtonIdSuffix" value="Hdr" />
                                            <core:CustomData key="Header" value="1" />
                                        </customData>
                                    </Button>
                                    <Button id="btnTest" 
                                        icon="sap-icon://refresh"
                                        press="onTest"
                                        tooltip="{ddtext>/REFRESH}"
                                        visible="false"/>
                                </OverflowToolbar>
                            </uiT:extension>
                            <uiT:layoutData>
                                <FlexItemData growFactor="1" baseSize="0%"/>
                            </uiT:layoutData> 
                        </uiT:Table>
                        <layoutData>
                            <uiL:SplitterLayoutData size="50%" id="splitterHdr" />
                        </layoutData> 
                    </Panel>

                    <Panel id="panelDtl" width="100%" height="100%" class="sapUiNoContentPadding">
                        <uiT:Table id="detailTab"
                            class="sapUiTinyMarginBottom sapUiTinyMarginBegin sapUiTinyMarginEnd"
                            visibleRowCountMode="Auto"
                            minAutoRowCount="1"
                            showColumnVisibilityMenu="true"
                            enableColumnFreeze="true"
                            selectionMode="MultiToggle"
                            firstVisibleRowChanged="onFirstVisibleRowChanged"
                            cellClick="onCellClick"
                            sort="onSort"
                            filter="onFilter"
                            alternateRowColors="true"
                            columnFreeze="onColumnUpdated"
                            columnMove="onColumnUpdated"
                            columnResize="onColumnUpdated"
                            columnSelect="onColumnUpdated"
                            columnVisibility="onColumnUpdated">
                            <uiT:rowSettingsTemplate>
                                <uiT:RowSettings highlight="{= ${EDITED} === true ? 'Warning' : null}" />
                            </uiT:rowSettingsTemplate>
                            <uiT:extension>
                                <OverflowToolbar>
                                    <Text text="Component: {ui>/activeCompDisplay} ( {counts>/detail} Variable/s )" class="selHdrKeyFontStyle" />
                                    <ToolbarSpacer/>
                                    <SearchField
                                        id="searchFieldDtl"
                                        placeholder="Filter"
                                        value=""
                                        search="filterGlobally"
                                        visible="false"
                                        width="15rem"/>
                                    <ToolbarSeparator/>
                                    <Button id="btnAddDtl" 
                                        icon="sap-icon://add"
                                        press="onCreate" 
                                        tooltip="{ddtext>/ADD}"
                                        visible="true"/>
                                    <Button id="btnEditDtl" 
                                        icon="sap-icon://edit"
                                        press="onEdit"
                                        tooltip="{ddtext>/EDIT}"
                                        visible="true"/>
                                    <Button id="btnAddNewDtl" 
                                        icon="sap-icon://add"
                                        press="onAddNewRow" 
                                        tooltip="{ddtext>/ADD}"
                                        visible="false"/>                                
                                    <Button id="btnSaveDtl" 
                                        icon="sap-icon://save"
                                        press=".onBatchSave" 
                                        tooltip="{ddtext>/SAVE}"
                                        visible="false" />
                                    <Button id="btnCancelDtl" 
                                        icon="sap-icon://sys-cancel"
                                        press="onCancel" 
                                        tooltip="{ddtext>/CANCEL}"
                                        visible="false" /> 
                                    <Button id="btnDeleteDtl" 
                                        icon="sap-icon://delete"
                                        press="onDelete"
                                        tooltip="{ddtext>/DELETE}"
                                        visible="true"/>
                                    <Button id="btnRefreshDtl" 
                                        icon="sap-icon://refresh"
                                        press="onRefresh"
                                        tooltip="{ddtext>/REFRESH}"
                                        visible="true"/>
                                    <Button id="btnFullScreenDtl" 
                                        icon="sap-icon://full-screen"
                                        press="onTableResize"
                                        tooltip="{ddtext>/FULLSCREEN}"
                                        visible="true" >
                                        <customData>
                                            <core:CustomData key="Max" value="1" />
                                            <core:CustomData key="TableId" value="detailTab" />
                                            <core:CustomData key="ButtonIdSuffix" value="Dtl" />
                                            <core:CustomData key="Header" value="0" />
                                        </customData>
                                    </Button>
                                    <Button id="btnExitFullScreenDtl" 
                                        icon="sap-icon://exit-full-screen"
                                        press="onTableResize"
                                        tooltip="{ddtext>/EXITFULLSCREEN}"
                                        visible="false" >
                                        <customData>
                                            <core:CustomData key="Max" value="0" />
                                            <core:CustomData key="TableId" value="detailTab" />
                                            <core:CustomData key="ButtonIdSuffix" value="Dtl" />
                                            <core:CustomData key="Header" value="0" />
                                        </customData>
                                    </Button>
                                </OverflowToolbar>
                            </uiT:extension>
                            <uiT:layoutData>
                                <FlexItemData growFactor="1" baseSize="0%"/>
                            </uiT:layoutData> 
                        </uiT:Table>
                        <layoutData>
                            <uiL:SplitterLayoutData size="50%" id="splitterDtl" />
                        </layoutData> 
                    </Panel>

                    <uiL:layoutData>
                        <FlexItemData growFactor="0.94" baseSize="0%"/>
                    </uiL:layoutData>
                </uiL:Splitter>
            </VBox>
        </content>
    </Page>
</mvc:View>
